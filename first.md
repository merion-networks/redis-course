

## 10–20 мин: Работа с ключами и строками (Strings)
1. **Добавление пары ключ-значение:**
   - `SET mykey "Hello Redis"`.
2. **Получение значения:** `GET mykey`.
3. **Проверка существования ключа:** `EXISTS mykey`.
4. **Удаление:** `DEL mykey`.
5. **Срок жизни ключа (TTL, EXPIRE):**
   - `SET session "user42"`.
   - `EXPIRE session 10` (установить время жизни).
   - `TTL session` (проверить оставшееся время).
6. **Инкремент и числовые операции:** 
   - `SET counter 0`.
   - `INCR counter`.
   - `INCRBY counter 5`.
   - `GET counter`.

---

## 20–30 мин: Работа с основными структурами данных
### Списки (Lists)
1. **Создание и добавление:** `RPUSH mylist "item1" "item2"`.
2. **Чтение:** `LRANGE mylist 0 -1` (вывести весь список).
3. **Поп/Пуш (LPOP, RPOP):** показать, как забирать элементы с начала/конца списка.

### Хэши (Hashes)
1. **Создание:** `HSET user:1 name "Alex" age 25`.
2. **Чтение:** `HGETALL user:1`.
3. **Чтение конкретного поля:** `HGET user:1 name`.

### Множества (Sets)
1. **Создание:** `SADD myset "apple" "banana" "cherry"`.
2. **Просмотр:** `SMEMBERS myset`.
3. **Проверка элемента:** `SISMEMBER myset "banana"`.

### Отсортированные множества (Sorted Sets)
1. **Создание:** `ZADD scores 100 "Player1" 150 "Player2" 90 "Player3"`.
2. **Просмотр:** `ZRANGE scores 0 -1 WITHSCORES`.

---
команды **MSET** и **MGET** в Redis нужны, чтобы работать сразу с несколькими ключами за один раз.

- **MSET** (Multiple Set) позволяет установить (создать или обновить) несколько пар ключ–значение за одну команду.
  - Например:  
    ```bash
    MSET name "Alice" age "30" city "Berlin"
    ```
    Эта команда сразу создаст (или изменит, если ключи уже были) три ключа: `name`, `age`, `city`.  
    Получается, что вместо трёх отдельных команд `SET name "Alice"`, `SET age "30"`, `SET city "Berlin"`, мы используем одну – удобнее и быстрее.

- **MGET** (Multiple Get) позволяет за раз получить значения сразу у нескольких ключей.  
  - Например:
    ```bash
    MGET name age city
    ```
    Если мы до этого делали `MSET name "Alice" age "30" city "Berlin"`, то команда `MGET` вернёт `("Alice", "30", "Berlin")`.  

Вот простой пример использования **WATCH/MULTI/EXEC** на конкретном кейсе с ключом `counter`. Предположим, мы хотим безопасно увеличить `counter` на 1, но при этом следим, чтобы значение не поменялось кем-то другим в середине.

```bash
# Удалим ключ "counter" на всякий случай, чтобы начать "с чистого листа"
DEL counter

# Установим начальное значение:
SET counter 0

# Начинаем следить за ключом "counter"
WATCH counter

# Начинаем транзакцию
MULTI

# Добавим в транзакцию команду инкремента
INCR counter

# Завершаем транзакцию
EXEC
```

1. **WATCH counter** — говорит Redis: «если кто-то другой параллельно изменит `counter`, то наша транзакция не должна выполняться».
2. **MULTI** — начинает «набор» команд для транзакции.
3. **INCR counter** — добавляем команду в транзакцию.
4. **EXEC** — выполняет все команды в транзакции, но только если никто не изменил `counter` после команды `WATCH`. Если кто-то внёс изменения — Redis вернёт ошибку (нулевой результат), и можно заново пересмотреть логику или повторить транзакцию.

---

Ниже примерный блок на 10 минут по теме Pub/Sub в Redis, с 2–3 небольшими примерами, которые можно показать в лайвкодинге:

---

## Дополнительный блок (около 10 минут): Pub/Sub в Redis

### Зачем Pub/Sub
Redis поддерживает механизм “Publisher/Subscriber” – это когда одна или несколько программ подписываются на определённые каналы (channels), а другие программы шлют туда сообщения (publish). Все подписчики получают эти сообщения в реальном времени. Отлично подходит для уведомлений, логирования, чатов и т.д.

### Пример 1: Базовая демонстрация из двух консолей
1. **Открой две консоли** на одной машине (или в двух вкладках терминала).
2. **В первой консоли** запусти `redis-cli`, подпишись на канал:
   ```bash
   SUBSCRIBE news
   ```
   Теперь это окно будет «слушать» канал `news`.

3. **Во второй консоли** запусти `redis-cli` и выполни:
   ```bash
   PUBLISH news "Hello from Redis!"
   ```
4. **Результат:** в первой консоли увидишь сообщение:
   ```
   1) "message"
   2) "news"
   3) "Hello from Redis!"
   ```
   То есть мы опубликовали строку “Hello from Redis!” на канале `news`, и все, кто был подписан, её получили.

### Пример 2: Подписка на несколько каналов
1. **В первой консоли** (подписчик):
   ```bash
   SUBSCRIBE channel1 channel2
   ```
   Теперь этот подписчик будет получать сообщения из обоих каналов.
2. **Во второй консоли** (издатель):
   ```bash
   PUBLISH channel1 "Message for channel1"
   ```
   И сразу увидишь в первой консоли пришедшее сообщение.
3. **Потом**:
   ```bash
   PUBLISH channel2 "Message for channel2"
   ```
   Снова в первой консоли получишь оповещение, но теперь уже по второму каналу.

### Пример 3: Использование паттернов (PSUBSCRIBE)
1. **В первой консоли**:
   ```bash
   PSUBSCRIBE news.*
   ```
   Это значит, что подписчик теперь слушает все каналы, соответствующие шаблону `news.*`. Например, `news.football`, `news.politics`, `news.1`, и т.д.
2. **Во второй консоли**:
   ```bash
   PUBLISH news.football "Goal!"
   PUBLISH news.politics "Election results"
   ```
3. **Результат:** в первой консоли получишь сообщения по обоим каналам, так как они подходят под шаблон `news.*`.

---

## Итог по Pub/Sub
- **SUBSCRIBE** / **UNSUBSCRIBE** – чтобы подписаться/отписаться от каналов.
- **PUBLISH** – чтобы отправлять сообщения.
- **PSUBSCRIBE** / **PUNSUBSCRIBE** – чтобы подписаться/отписаться по паттерну (шаблону).
- Pub/Sub – простой и быстрый механизм обмена сообщениями в реальном времени.  

За 10 минут таких 2-3 примера обычно достаточно, чтобы получить общее представление о Pub/Sub в Redis.

---

## 40–45 мин: Перерыв или сводка по первой части
- Быстренько повтори основные моменты: типы данных, транзакции, TTL, и так далее.
- Ответь на вопросы (в лайвкодинге обычно есть вопросы, но раз уж это план, можно сделать краткое резюме).

---

## 45–55 мин: Установка и настройка Redis Insight
1. **Скачивание Redis Insight (если не установлено):**
   - Заходишь на официальный сайт Redis, качаешь пакет для Ubuntu или в Docker-контейнере.
2. **Установка и запуск Redis Insight:**
   - Если `.deb`, то `sudo dpkg -i redisinsight.deb`.
   - Запуск: может быть через меню приложений или командой в терминале, зависит от версии.
3. **Создание подключения к локальному Redis:** 
   - В интерфейсе Redis Insight указываешь хост (`127.0.0.1`), порт (обычно `6379`).
   - Подключаешься, проверяешь, что все работает.

---

## 55–65 мин: Обзор интерфейса Redis Insight
1. **Обзор дашборда:** где посмотреть ключи, статистику, CPU/Memory, операции в реальном времени.
2. **Просмотр ключей и значения:**
   - Покажи, как в графическом интерфейсе легко увидеть `myset`, `mylist`, `user:1` и т.д.
   - Удобный просмотр структуры (Lists, Hashes, Sets).
3. **Редактирование:**
   - Как изменить значение или добавить/удалить поля прямо в GUI.

---

## 65–75 мин: Практические примеры с Redis Insight
1. **Создание новых ключей через Insight:**
   - Вкладка “Browser”, кнопка “Add new key” (в зависимости от версии интерфейса).
2. **Мониторинг:**
   - В реальном времени посмотри, как изменяются ключи, если параллельно в `redis-cli` что-то меняешь.
3. **Backup и Restore (если нужно показать):**
   - Посмотри, есть ли встроенные фичи для бэкапа, или покажи, как выгрузить RDB-файл.

---

## 75–85 мин: Дополнительные фишки и советы
1. **Настройка паролей и безопасности:**
   - В `redis.conf` включение пароля (requirepass). Как подключаться в redis-cli с паролем.
   - Как в Redis Insight добавить подключение с паролем.
2. **Настройка persistence (RDB, AOF):**
   - Коротко: `appendonly yes`, проверить конфиг.
   - Покажи, где это смотреть в Insights (если там есть вкладка Config).
3. **Разные режимы работы:** Master-Slave (Replica), Sentinel, Cluster (если хочешь слегка упомянуть и показать, что есть такие возможности).

---

## 85–90 мин: Заключение и Q&A
1. **Резюме:** 
   - Что научился делать (основные команды redis-cli, структура данных, транзакции).
   - Чем хорош Redis Insight, где упрощает жизнь.

---
